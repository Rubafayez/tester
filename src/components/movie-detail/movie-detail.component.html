<div class="p-4 sm:p-6 lg:p-8">
  @if (movie(); as m) {
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="md:col-span-1">
        <img [src]="m.posterUrl" [alt]="m.title" class="rounded-lg shadow-lg w-full">
      </div>
      <div class="md:col-span-2">
        <h1 class="text-4xl font-bold text-white">{{ m.title }} <span class="text-2xl font-light text-gray-400">({{ m.year }})</span></h1>
        
        <div class="flex items-center mt-2">
          <div class="flex items-center text-yellow-400">
            <svg class="w-5 h-5 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 6.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
            </svg>
            <span class="text-lg font-bold">{{ m.rating.toFixed(1) }}</span>
          </div>
          <span class="mx-2 text-gray-500">|</span>
          <span class="text-gray-300">Directed by {{ m.director }}</span>
        </div>
        
        <div class="mt-4">
          @for (genre of m.genres; track genre.id) {
            <span class="inline-block bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-200 mr-2 mb-2">{{ genre.name }}</span>
          }
        </div>
        
        <p class="mt-6 text-lg text-gray-300">{{ m.description }}</p>

        <div class="mt-8">
          <h2 class="text-2xl font-semibold text-white mb-4">Cast</h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
            @for (star of m.stars; track star.id) {
              <a [routerLink]="['/star', star.id]" class="text-center group">
                <img [src]="star.photoUrl" [alt]="star.name" class="w-24 h-24 rounded-full mx-auto shadow-md group-hover:ring-2 ring-red-500 transition">
                <p class="mt-2 text-sm font-medium text-gray-300 group-hover:text-red-500">{{ star.name }}</p>
              </a>
            } @empty {
              <p class="text-gray-400 col-span-full">Cast information not available.</p>
            }
          </div>
        </div>

        <div class="mt-8">
            <button (click)="addToCart(m)" class="flex items-center justify-center rounded-md bg-red-600 px-5 py-3 text-base font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600">
                <svg class="-ml-1 mr-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H4.72l-.21-1.257A1 1 0 003 1z" />
                    <path d="M16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
                </svg>
                Add to Cart
            </button>
        </div>

      </div>
    </div>
  } @else {
    <p class="text-center text-gray-400">Loading movie details...</p>
  }
</div>
